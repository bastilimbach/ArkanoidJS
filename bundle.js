!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MovingDirection=t.AttachmentPosition=t.ItemType=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=i(n(2)),a=i(n(1)),u=t.ItemType={RECTANGLE:"rectangle",CIRCLE:"circle"},s=t.AttachmentPosition={TOP:"attachTop",RIGHT:"attachRight",BOTTOM:"attachBottom",LEFT:"attachLeft",CENTER:"attachCenter"},l=t.MovingDirection={UP:"movingUp",RIGHT:"movingRight",DOWN:"movingDown",LEFT:"movingLeft",NONE:"notMoving"},c=function(){function e(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.RECTANGLE,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[l.NONE,l.NONE],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=a.default.createGuid(),this.position=t,this.size=n,this.color=i,this.type=o,this.life=r,this.direction=s,this.speed=c,this.boundItems=[],this.attachmentPosition=null}return o(e,[{key:"attachItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.CENTER;e.setAttachmentPosition(t),this.boundItems.push(e),this.setPosition(this.position)}},{key:"detachItem",value:function(e){for(var t=0;t<this.boundItems.length;t+=1)if(e.id===this.boundItems[t].id){this.boundItems.splice(t,1);break}}},{key:"setPosition",value:function(e){for(var t=0;t<this.boundItems.length;t+=1){var n=this.calculateAttachmentPosition(this.boundItems[t]);this.boundItems[t].setPosition(n)}this.position=e}},{key:"getNextPosition",value:function(){var e=function(e){switch(e){case l.UP:case l.LEFT:return function(e,t){return e-t};case l.RIGHT:case l.DOWN:return function(e,t){return e+t};case l.NONE:return function(e){return e};default:throw new TypeError("Error!")}},t=e(this.direction[0]),n=e(this.direction[1]),i=[t(this.position[0],this.speed[0]),n(this.position[1],this.speed[1])],o=r.default.collisionAt(i,this);if(null!==o)switch(o.collider.life<this.life?this.setLife(0):o.collider.decreaseLife(),console.log(o.collider),o.direction){case"horizontal":i=o.calculatedCollisionPosition,this.flipHorizontalDirection();break;case"vertical":i=o.calculatedCollisionPosition,this.flipVerticalDirection();break;default:throw new TypeError("Unknown collision direction.")}return i}},{key:"setAttachmentPosition",value:function(e){this.attachmentPosition=e}},{key:"setSpeed",value:function(e){this.speed=e}},{key:"getSpeed",value:function(){return this.speed}},{key:"setDirection",value:function(e){this.direction=e}},{key:"setLife",value:function(e){this.life=e}},{key:"decreaseLife",value:function(){this.life>0&&(this.life-=1)}},{key:"getDirection",value:function(){return this.direction}},{key:"getPosition",value:function(){return this.position}},{key:"getXPosition",value:function(){return this.position[0]}},{key:"getYPosition",value:function(){return this.position[1]}},{key:"getCenterPosition",value:function(){return[this.position[0]+this.size[0]/2,this.position[1]+this.size[1]/2]}},{key:"getWidth",value:function(){return this.size[0]}},{key:"getHeight",value:function(){return this.size[1]}},{key:"getColor",value:function(){return this.color}},{key:"calculateAttachmentPosition",value:function(e){var t=this.getCenterPosition();switch(e.attachmentPosition){case s.CENTER:return t;case s.TOP:return[t[0],this.position[1]-e.getHeight()/2-10];case s.RIGHT:case s.BOTTOM:case s.LEFT:return new ReferenceError("This attachment position isn't implemented yet.");default:return new TypeError("Couldn't attach Item: Unknown attachment position.")}}},{key:"flipHorizontalDirection",value:function(){this.direction[0]=this.direction[0]===l.LEFT?l.RIGHT:l.LEFT}},{key:"flipVerticalDirection",value:function(){this.direction[1]=this.direction[1]===l.UP?l.DOWN:l.UP}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"randomIntFromInterval",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"createGuid",value:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observableItems=[]}return i(e,[{key:"addObservableItem",value:function(e){this.observableItems.push(e)}},{key:"removeObservableItemAtIndex",value:function(e){this.observableItems.splice(e,1)}},{key:"collisionAt",value:function(e,t){for(var n={direction:"",collider:"",calculatedCollisionPosition:[]},i=0;i<this.observableItems.length;i+=1){var r=this.observableItems[i];if(e[0]>=r.getXPosition()-t.getWidth()/2&&e[0]<=r.getXPosition()+r.getWidth()+t.getWidth()/2&&e[1]>=r.getYPosition()&&e[1]<=r.getYPosition()+r.getHeight())return n.direction="horizontal",n.collider=r,t.getDirection()[0]===o.MovingDirection.LEFT?n.calculatedCollisionPosition=[r.getXPosition()+r.getWidth()+t.getWidth()/2,e[1]]:t.getDirection()[0]===o.MovingDirection.RIGHT&&(n.calculatedCollisionPosition=[r.getXPosition()-t.getWidth()/2,e[1]]),n;if(e[1]>=r.getYPosition()-t.getWidth()/2&&e[1]<=r.getYPosition()+r.getHeight()+t.getWidth()/2&&e[0]>=r.getXPosition()-t.getWidth()/2&&e[0]<=r.getXPosition()+r.getWidth()+t.getWidth()/2)return n.direction="vertical",n.collider=r,t.getDirection()[1]===o.MovingDirection.UP?n.calculatedCollisionPosition=[e[0],r.getYPosition()+r.getHeight()+t.getHeight()/2]:t.getDirection()[1]===o.MovingDirection.DOWN&&(n.calculatedCollisionPosition=[e[0],r.getYPosition()-t.getHeight()/2]),n}return null}}]),e}();t.default=new r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),a=i(r),u=i(n(4)),s=i(n(10)),l=i(n(11)),c=i(n(13)),f=i(n(1)),h=i(n(2)),d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[],this.controllableItems=[],this.movingItems=[]}return o(e,[{key:"loadInitialItems",value:function(){var e=new u.default(20,"yellow"),t=new s.default(100,10,"#000");t.attachItem(e,r.AttachmentPosition.TOP),this.items=[t],h.default.addObservableItem(t)}},{key:"loadLevel",value:function(){for(var e=10,t=10,n=(1e3/12).toFixed()-3-12/e,i=0;i<20;i+=1){var o=new c.default([e,t],[n,40],"red",f.default.randomIntFromInterval(1,1));this.items.push(o),h.default.addObservableItem(o),e+n>1e3-n?(e=10,t=t+40+3):e=e+n+3}this._loadLevelBoundaries()}},{key:"_loadLevelBoundaries",value:function(){var e=new a.default([0,0],[1e3,5],"blue"),t=new a.default([995,0],[5,500],"blue"),n=new a.default([0,495],[1e3,5],"blue",r.ItemType.RECTANGLE,-2),i=new a.default([0,0],[5,1e3],"blue");this.items.push(e,t,n,i),h.default.addObservableItem(e),h.default.addObservableItem(t),h.default.addObservableItem(n),h.default.addObservableItem(i)}},{key:"addItem",value:function(e){this.items.push(e)}},{key:"addMovingItem",value:function(e){this.movingItems.push(e)}},{key:"getMovingItems",value:function(){return this.movingItems}},{key:"getItems",value:function(){return this._purgeDeadItems(),this.items}},{key:"getControllableItems",value:function(){return this.controllableItems.push(new l.default(this.items[0])),this.controllableItems}},{key:"_purgeDeadItems",value:function(){for(var e=0;e<this.items.length;e+=1)if(0===this.items[e].life){this.items.splice(e,1),h.default.removeObservableItemAtIndex(e);break}for(var t=0;t<this.movingItems.length;t+=1)if(0===this.movingItems[t].life){this.movingItems.splice(t,1);break}for(var n=0;n<this.controllableItems.length;n+=1)if(0===this.controllableItems[n].life){this.controllableItems.splice(n,1);break}}}]),e}();t.default=new d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),a=i(r),u=i(n(1)),s=function(e){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=i;return null===o&&(o=[u.default.randomIntFromInterval(0,1e3),u.default.randomIntFromInterval(0,500)]),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,[e,e],n,r.ItemType.CIRCLE))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"moveFreely",value:function(){var e=this.getNextPosition();this.setPosition(e)}}]),t}();t.default=s},function(e,t,n){"use strict";n(6),n(7);var i=function(e){return e&&e.__esModule?e:{default:e}}(n(8));document.addEventListener("DOMContentLoaded",function(){function e(){t.update(),window.requestAnimFrame(e)}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};var t=new i.default;e()})},function(e,t){},function(e,t,n){e.exports=n.p+"index.html"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=i(n(9)),a=i(n(3)),u=i(n(14)),s={RUNNING:"running"},l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=s.RUNNING,this.render=new r.default,a.default.loadInitialItems(),a.default.loadLevel(),this.movingItems=a.default.getMovingItems(),this.mouseController=new u.default(this,this.render.canvas,a.default.getControllableItems())}return o(e,[{key:"update",value:function(){this._moveItems(),this.render.clearScreen(),this.render.renderItems(a.default.getItems())}},{key:"_moveItems",value:function(){this.movingItems=a.default.getMovingItems();for(var e=0;e<this.movingItems.length;e+=1)this.movingItems[e].moveFreely()}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=1e3,this.canvas.height=500,document.getElementsByClassName("app")[0].appendChild(this.canvas)}return i(e,[{key:"clearScreen",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"renderItems",value:function(e){for(var t=0;t<e.length;t+=1){this._drawShape(e[t]);for(var n=0;n<e[t].boundItems.length;n+=1)this._drawShape(e[t].boundItems[n])}}},{key:"_drawShape",value:function(e){switch(e.type){case o.ItemType.RECTANGLE:this._drawRectangle(e.getXPosition(),e.getYPosition(),e.getWidth(),e.getHeight(),e.getColor());break;case o.ItemType.CIRCLE:this._drawCircle(e.getXPosition(),e.getYPosition(),e.getWidth()/2,e.getColor());break;default:throw new TypeError("Couldn't render Item: Unknown item type.")}}},{key:"_drawRectangle",value:function(e,t,n,i,o){this.context.beginPath(),this.context.rect(e,t,n,i),this.context.fillStyle=o,this.context.fill()}},{key:"_drawCircle",value:function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.context.beginPath(),this.context.arc(e,t,n,0,2*Math.PI),this.context.fillStyle=i,this.context.fill(),null!==o&&(this.context.strokeStyle="black",this.context.lineWidth=1,this.context.stroke())}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),a=i(r),u=i(n(4)),s=i(n(3)),l=function(e){function t(e,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,[500-e/2,500-n-10],[e,n],i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"unbindBall",value:function(){for(var e=0;e<this.boundItems.length;e+=1)if(this.boundItems[e]instanceof u.default){var t=this.boundItems[e].getPosition(),n=this.boundItems[e].getColor(),i=this.boundItems[e].getWidth();this.detachItem(this.boundItems[e]);var o=new u.default(i,n,t);o.setSpeed([10,8]),o.setDirection([r.MovingDirection.LEFT,r.MovingDirection.UP]),s.default.addItem(o),s.default.addMovingItem(o)}}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(12)),r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.platform=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"move",value:function(e){(function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"move",this).call(this,[e[0],null])}},{key:"handleClick",value:function(){this.platform.unbindBall()}}]),t}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.item=t}return i(e,[{key:"move",value:function(e){var t=this.item.position[0],n=this.item.position[1];null!==e[0]&&(t=e[0]-this.item.getWidth()/2),null!==e[1]&&(n=e[1]-this.item.getHeight()/2),this.item.setPosition([t,n])}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=function(e){function t(e,n,o,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,i.ItemType.RECTANGLE,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),t}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.items=i,n.addEventListener("mousemove",this.mouseMoved.bind(this)),n.addEventListener("click",this.mouseClicked.bind(this))}return i(e,[{key:"mouseMoved",value:function(e){for(var t=[e.layerX,e.layerY],n=0;n<this.items.length;n+=1)this.items[n].move(t)}},{key:"mouseClicked",value:function(){for(var e=0;e<this.items.length;e+=1)this.items[e].handleClick()}}]),e}();t.default=o}]);